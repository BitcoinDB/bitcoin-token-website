<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta content="Clemens Ley" name="author">
  <meta content="UNLICENCED" name="copyright">
  <meta content="index, follow" name="robots">
  <meta content="Create your own token on top of Bitcoin" name="description">
  <meta content="UNLICENCED" name="copyright">
  <meta content="" name="keywords">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <title>BitcoinToken</title>
  <link href="favicon.ico" rel="Shortcut Icon" type="image/x-icon">
  <link href="https://unpkg.com/primer/build/build.css" rel="stylesheet">
  <link href="styles.css" rel="stylesheet">
</head>
<body>
  <header class="Header js-details-container Details f5 bg-blue-light" role="banner">
    <div class="main-nav d-flex flex-justify-between px-3 pl-md-4 pr-md-4 py-3 bg-blue-light Details js-details-container container-lg">
      <div class="my-2">
        <a aria-label="Homepage" class="header-logo-invertocat d-flex flex-items-center text-bold no-underline" data-ga-click="Header, go to dashboard, icon:logo" data-hotkey="g d" href="http://www.bitcointoken.com"><img id="logo" src="https://i.imgur.com/R94kr0V.png">
        <div class="mx-2">
          BitcoinToken
        </div></a>
      </div>
      <div class="d-lg-flex flex-justify-between my-2">
        <div class="d-lg-flex">
          <ul class="d-lg-flex pl-lg-2 flex-items-center text-bold list-style-none mb-0" role="navigation">
            <li class="position-relative">
              <a class="js-selected-navigation-item HeaderNavlink px-lg-2 py-2 py-lg-0 no-underline" data-ga-click="Header, click, Nav menu - item:docs" data-octo-click="docs" data-octo-dimensions="location:nav_bar" data-selected-links=" /docs" href="docs.html">Docs</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </header>

  <section class="flex-row width-full bg-blue-light">
    <div class="flex-row main-content width-full pt-0 pb-2 pt-md-2 pb-md-4 mx-auto px-3 px-md-6 px-lg-3">
      <h1 class="f00-light mb-n3">BitcoinToken Docs</h1>
      <h2 class="f2-light mb-4 text-gray"><code>VERSION 0.0.1-alpha.1</code></h2>
    </div>
  </section>

  <section class="main-content mx-auto p-responsive pb-10 pt-6">
    <p class="lead">BitcoinToken consists of three tools: a Bitcoin Cash wallet, a database for reading and writing to the blockchain, and a token solution. The tools are implemented in Javascript and run in the browser and in node. All tools can be used without prior blockchain knowledge.
      </p>

    <h2 class="alt-h2 border-bottom border-gray-dark mb-2">The Tech Stack</h2>
    <p class="mt-4">BitcoinToken has a layered architecture, where lower levels provide functionality for the levels above.</p>

    <a class="card hover-card p-3 p-md-4 d-flex flex-items-center my-4" href="#bitcoin-token">
      <div>
        <h3 class="h3 mb-2 text-normal">Your app</h3>
        <p class="text-gray-dark">Your application can use of the functionality provided by the layers below</p>
      </div>
    </a> 

    <a class="card hover-card p-3 p-md-4 d-flex flex-items-center mb-2 mt-4 bg-blue-light" href="#bitcoin-token">
      <div>
        <h3 class="h3 mb-2 text-normal">BitcoinToken</h3>
        <p class="text-gray-dark">Create tokens and smart contracts on Bitcoin Cash</p>
      </div>
    </a>

    <a class="card hover-card p-3 p-md-4 d-flex flex-items-center mb-2 bg-green-light" href="#bitcoin-db">
      <div>
        <h3 class="h3 mb-2 text-normal">BitcoinDb</h3>
        <p class="text-gray-dark">Store, update, and retrieve json data on the Bitcoin Cash blockchain.</p>
      </div>
    </a>

    <a class="card hover-card p-3 p-md-4 d-flex flex-items-center mb-2 bg-yellow-light" href="#bitcoin-wallet">
      <div>
        <h3 class="h3 mb-2 text-normal">BitcoinWallet</h3>
        <p class="text-gray-dark">Receive, hold, and send Bitcoin Cash.</p>
      </div>
    </a>

    <a class="card hover-card p-3 p-md-4 d-flex flex-items-center mb-4 bg-red-light" href="https://github.com/BitcoinDB/BitcoinSource">
      <div>
        <h3 class="h3 mb-2 text-normal">BitcoinSource</h3>
        <p class="text-gray-dark">A high quality Javascript implementation of Bitcoin Cash.</p>
      </div>
    </a>

    <p class="f4-light mb-4">The BitcoinToken suite exposes the three classes at the root level.</p>

    <div class="markdown-body mb-2">
      <pre class="box highlight">
        const Bitcoin = require('./bitcoin-token')

        const BitcoinWallet = Bitcoin.Wallet
        const BitcoinDb = Bitcoin.Db
        const BitcoinToken = Bitcoin.Token
        </pre>
    </div>
  </section>

  <div class="bg-yellow-light py-10">
    <section class="main-content mx-auto p-responsive py-3" id='bitcoin-wallet'>

      <h2 class="alt-h2 border-bottom border-gray-dark mb-2">BitcoinWallet</h2>

      <p class="f4-light">BitcoinWallet is a Javascript wallet. It can store, send and receive bitcoin. Both Bitcoin TokenDb and BitcoinToken use BitcoinWallet.</p>
      <div class="markdown-body mb-2">
        <pre class="box highlight">
          const wallet = new BitcoinWallet()
          await wallet.getAddress()                  
          await wallet.getBalance()                  
          await wallet.send(1, &lt;public key&gt;)
        </pre>
      </div>

      <h3 class="alt-h3 border-bottom border-gray-dark mb-2 mt-4">Initialization</h3>
      <p class="f4-light">There are two ways to initialize a BitcoinWallet. To create a wallet from random, call the constructor. To initialize the wallet from an existing private key call <code>fromHdPrivateKey</code> with a string encoding an extended private key as specified in <a href="https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki">BIP32</a>.</p>
      <div class="markdown-body mb-2">
        <pre class="box highlight">
          const randomWallet = new BitcoinWallet()

          const hdPrivateKey = BitcoinWallet.getHdPrivateKey()
          const walletFromKey = BitcoinWallet.fromHdPrivateKey(hdPrivateKey)
        </pre>
      </div>

      <h3 class="alt-h3 border-bottom border-gray-dark mb-2 mt-4">Receiving Bitcoin Cash</h3>
      <p class="f4-light">To receive a deposit address call <code>getAddress()</code>. You can fund the wallet through a <a href="https://coinfaucet.eu/en/bch-testnet">testnet faucet()</a>. The private and public key of a wallet can be accessed throught <code>getPublicKey()</code> and <code>getPrivateKey</code>.</p>
      
      <div class="markdown-body mb-2">
        <pre class="box highlight">
          const address = wallet.getAddress()
          const publicKey = wallet.getPublicKey()
          const privateKey = wallet.getPrivateKey()
        </pre>
      </div>

      <h3 class="alt-h3 border-bottom border-gray-dark mb-2 mt-4">Sending Bitcoin Cash</h3>
      <p class="f4-light">After you have funded your wallet, you can send Bitcoin Cash to another address by calling <code>send()</code>. The return value is the id of the transaction that was broadcast.</p>
      <div class="markdown-body mb-2">
        <pre class="box highlight">
              const txId = await wallet.send(amount, address)
            </pre>
      </div>

      <h3 class="alt-h3 border-bottom border-gray-dark mb-2 mt-4">Checking the balance</h3>
      <p class="f4-light">You can check the balance of an account by calling <code>getBalance()</code>.</p>
      <div class="markdown-body mb-2">
        <pre class="box highlight">
          const balance = await wallet.getBalance()
        </pre>
      </div>

      <h3 class="alt-h3 border-bottom border-gray-dark mb-2 mt-4">Deriving child wallets</h3>
      <p class="f4-light">You can derive a large number of BitcoinWallets from a BitcoinWallet. These wallets can derive further child wallets. Under the hood a BitcoinWallet is a hardened deterministic hierarchical wallet as specified in <a href="https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki">BIP32</a>.</p>
      <div class="markdown-body mb-2">
        <pre class="box highlight">
          const childWallet = wallet.derive(3)
          const grandChildWallet = childWallet.derive(7)
        </pre>
      </div>
    </section>
  </div>

  <!-- ########################################################## -->
  
  <div class="bg-green-light py-10">
    <section class="main-content mx-auto p-responsive py-3" id='bitcoin-db'>
      <h2 class="alt-h2 border-bottom border-gray-dark mb-2">BitcoinDb</h2>
      <p class="f4-light">BitcoinBd lets you store, read, and update json files on the blockchain. We are currently only supporting json objects with string values of less than 350 charachters. In the future we will add support for arbitrary json data.</p>
      <p>Basic usage is as follows.</p>
      <div class="markdown-body mb-2">
        <pre class="box highlight">
                const db = new BitcoinDb()
                const id = await db.put({ hello: 'Bitcoin' })
                await db.get(id) // returns { hello: 'Bitcoin' }
              </pre>
      </div>

      <h3 class="alt-h3 border-bottom border-gray-dark mb-2 mt-4">Initialization</h3>
      <p class="f4-light">There are three ways to initialize a BitcoinWallet: To create a wallet from random, call the constructor. To initialize from an existing private key call <code>fromHdPrivateKey</code>. The third option is to pass in a BitcoinWallet object</p>
      <div class="markdown-body mb-2">
        <pre class="box highlight">
              const db1 = new BitcoinDb()

              const hdPrivateKey = BitcoinDb.getHdPrivateKey()
              const db2 = BitcoinDb.fromHdPrivateKey(hdPrivateKey)

              const bitcoinWallet = new BitcoinWallet()
              const db3 = new BitcoinDb(bitcoinWallet)
            </pre>
      </div>

      <h3 class="alt-h3 border-bottom border-gray-dark mb-2 mt-4">Storing data</h3>
      <p class="f4-light">To store json data call <code>put()</code>. We currently support json data with string keys and values that need to be shorter than 350 charachters. </p>
      <div class="markdown-body mb-2">
        <pre class="box highlight">
              await db1.put({ a: 'aaa' })
            </pre>
      </div>
      <p class="f4-light">Data stored using BitcoinDb is stored on the blockchain and hence readable by anybody. If you want to restric read access we recommend you encrypt data before you store it in BitcoinDb.</p>
        
      <p class="f4-light">While anyone can read the data that is stored in BitcoinDB, only a specified user (group) called "owners" can update the data. To specify that group of users, you can pass an optional second parameter to <code>put()</code> that contains the public keys of the owners. By default the current user is the only owner</p>
      <div class="markdown-body mb-2">
        <pre class="box highlight">
          await db1.put({ a: 'aaa' }, [db2.getPublicKey()])
        </pre>
      </div>
      <p class="f4-light"><code>put()</code> takes a third optional argument that specifies an account of satoshis that will be stored in one atomic unit together with that data and the owners. When you call <code>put()</code> this amount of satoshis that will be transferred from the user calling the function to the new owners. This feature can be used to build a token exchange and has many other use cases.</p>
      <div class="markdown-body mb-2">
          <pre class="box highlight">
            await db1.put({ a: 'aaa' }, [db2.getPublicKey()], 100000)
          </pre>
        </div>

      <!-- <p class="f4-light">Internally, the command <code>db.put</code> builds and broadcasts a Bitcoin Cash transaction with one output that contains a script encoding the data. The owner is the user that has the private key that can spend (and hence update) that data.</p> -->

      <h3 class="alt-h3 border-bottom border-gray-dark mb-2 mt-4">Reading data</h3>
      <p class="f4-light">The return value of <code>put()</code> is a json object that encode the location on the blockchain where the data is stored. It consists of a  transaction id as well as the output number of the output encoding the data.</p>
      <div class="markdown-body mb-2">
        <pre class="box highlight">
          { txId: 'f9ed485e2a528cf1c0570b8f1c65b1521a68b1e63b50f3011e9e7d4d2eeecf04', outputNumber: 0 }
        </pre>
      </div>
      <p class="f4-light">The id returned from <code>db.put</code> can be used to lookup the data stored on the blockchain. BitcoinDb syncs across the globe in seconds, so data stored by one user is visible by everybody else within seconds. To read data, pass the identifier returned by <code>put()</code> into <code>db.get</code>.</p>
      <div class="markdown-body mb-2">
        <pre class="box highlight">
              const id = await db1.put({ a: 'aaa' })
              await db2.get(id)
            </pre>
      </div>
      <p class="f4-light">The value returned from <code>db.get</code> is a json object with three keys: <code>data</code> contains the initially stored data, <code>owners</code> is the list of the public keys of the owners, and <code>amount</code> contains the number of satoshi contained in the output that stores the data.</p>
      <div class="markdown-body mb-2">
        <pre class="box highlight">
              { 
                &nbsp;&nbsp;data: { a: 'aaa' },
                &nbsp;&nbsp;owners: [ &lt;PublicKey: 03fc00d6e3044a17b17ff443f14f2eb23181071c9140a71a7cdc26fcc5d6d597e8&gt; ],
                &nbsp;&nbsp;amount: 5000
              }
            </pre>
      </div>

      <h3 class="alt-h3 border-bottom border-gray-dark mb-2 mt-4">Updating data</h3>
      <p class="f4-light">You can use <code>db.update</code> to update data stored with BitcoinDb. The first parameter is the id of the output that contains the data that is to be updated. The second parameter is the new data. A third optional parameter can contain a list of owners like in <code>put()</code> that defaults to the current user. The fourth optional parameter is an amount of satoshis, also like in <code>put()</code>.

      <div class="markdown-body mb-2">
        <pre class="box highlight">
              const id1 = await db.put({ a: 'aaa' })
              const id2 = await db.update(id1, { b: 'bbb' })
              const id3 = await db.update(id2, { c: 'ccc' }, [db2.getPublicKey()])
              const id4 = await db.update(id3, { d: 'ddd' }, [db.getPublicKey()], 100000)
            </pre>
      </div>

      <h3 class="alt-h3 border-bottom border-gray-dark mb-2 mt-4">Under the hood</h3>

      <p class="f4-light">Internally, <code>db.update</code> builds and broadcasts the following Bitcoin Cash transaction: it spends the outputs specified by the first parameter and spends them into a new output that encodes the data from the second parameter. The output is an n-of-n multisig output, spendable by the owners from the third parameter. This output contains the number of Bitcoin specified by the last parameter.</p>
    </section>
  </div>
  <div class="bg-blue-light py-10">
    <section class="main-content mx-auto p-responsive pt-3 pb-12" id='bitcoin-token'>
      <h2 class="alt-h2 border-bottom mb-2">BitcoinToken</h2>
      <p class="f4-light">Bitcoin token lets you create tokens and other smart contracts on top of Bitcoin Cash. The basic usage is as follows. We currently support fungible tokens, similar to Ethereums ERC20 contract. We will be adding support for more smart contracts soon.</p>
      <div class="markdown-body mb-2">
        <pre class="box highlight">
                const token = new BitcoinToken()
                await token.create({ data: { balance: '10' }})
                await token.getBalance()                  
                await token.send(1, &lt;public key&gt;)
            </pre>
      </div>
      <h3 class="alt-h3 border-bottom border-gray-dark mb-2 mt-4">Initialization</h3>
      <p class="f4-light">Like BitcoinDb, BitcoinToken can be initialized in three different ways: To create a token from a random master private key, call the constructor. Or, initialize from an existing private key using <code>fromHdPrivateKey</code>. The third option is to pass in a <em>BitcoinDb</em> object</p>
      <div class="markdown-body mb-2">
        <pre class="box highlight">
              const token1 = new BitcoinToken()

              const masterPrivateKey = 'tprv8ZgxMBicQKsPefX1...'
              const token2 = BitcoinToken.fromHdPrivateKey(masterPrivateKey)

              const db = new BitcoinDb()
              const token3 = new BitcoinToken(db)
            </pre>
      </div>
      <h3 class="alt-h3 border-bottom border-gray-dark mb-2 mt-4">Creating (issuing) a Token</h3>
      <p class="f4-light">You can issue a token by calling <code>token.create</code>. To parameter must be the same kind of json object that is passed into <code>db.put</code>. You need to initialize the balance (the number of tokens existing at issuance) to some positive number</p>
      <div class="markdown-body mb-2">
        <pre class="box highlight">
              await token.create({ data: { balance: '10' }})
            </pre>
      </div>
      <h3 class="alt-h3 border-bottom border-gray-dark mb-2 mt-4">Checking the token balance</h3>
      <p class="f4-light">You can check how many tokens you currently own by calling <code>token.getBalance</code>. The return value is a number.</p>
      <div class="markdown-body mb-2">
        <pre class="box highlight">
              await token.getBalance()
            </pre>
      </div>
    </section>
  </div>
  <div class="py-10 bg-gray-dark">
    &nbsp;
    <p class="text-white text-center">Talk to us on <a class="text-inherit" href="https://twitter.com/thebitcointoken">Twitter</a> or <a class="text-inherit" href="https://t.me/joinchat/FMrjOUWRuUkNuIt7zJL8tg">Telegram</a></p>
  </div>
</body>
</html>